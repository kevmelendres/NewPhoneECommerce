<div class="container-fluid">
    <div class="row">
        <div class="position-fixed border-end" style="width:14rem; background-color: #F8FAFB;">
            <div class="d-flex flex-column align-items-center align-items-sm-start px-3 pt-2 text-white min-vh-100 w-100">
                <div class="mt-3 mb-4">
                    <img _ngcontent-ng-c2605709781="" src="https://d19m59y37dris4.cloudfront.net/directory/2-0-2/img/logo.svg" alt="Directory logo">
                </div>
                <ul class="nav nav-pills flex-column mb-sm-auto mb-0 align-items-center align-items-sm-start text-dark">
                    <li class="d-flex sidebar-link hvr-grow" routerLink="/admin">
                        <div class="d-inline" style="width:30px"><i class="fa-solid fa-chart-line"></i></div>
                        <div class="d-inline">Dashboard</div>
                    </li>
                    <li class="d-flex sidebar-link hvr-grow active-admin-sidebar-link" routerLink="/admin/manage-products">
                        <div class="d-inline" style="width:30px"><i class="fa-solid fa-mobile-screen-button"></i></div>
                        <div class="d-inline">Products</div>
                    </li>
                    <li class="d-flex sidebar-link hvr-grow" routerLink="/admin/manage-deliveries">
                        <div class="d-inline" style="width:30px"><i class="fa-solid fa-truck"></i></div>
                        <div class="d-inline">Deliveries</div>
                    </li>
                    <li class="d-flex sidebar-link hvr-grow" routerLink="/admin/manage-users">
                        <div class="d-inline" style="width:30px"><i class="fa-solid fa-user"></i></div>
                        <div class="d-inline">Users</div>
                    </li>
                </ul>
            </div>
        </div>

        <div class="py-5 ps-5 content-container">
            

            <div #deliveryReport>
                <span class="fs-4 fw-bold">Available Products in Store</span>
                <span class="fs-6 d-block fw-light">Admin > Manage Products</span>

                
                <div class="mt-4 d-flex">

                    <div style="width: 1200px" class="p-4 border border-opacity-10 rounded">
                        <div class="d-flex justify-content-between">
                            <div>
                                <span class="fw-bold">Click on row to edit product items.</span>
                            </div>
                            <div class="d-flex justify-content-end mb-3">
                                <div class="page-number d-flex align-items-center justify-content-center" (click)=onPrevPaginationClick()
                                     [class.disabled]="pageNumber <= totalNumberOfPages">
                                    <i class="fa-solid fa-chevron-left"></i>
                                </div>
                                <div *ngFor="let number of pageNumberList">
                                    <div class="page-number d-flex align-items-center justify-content-center"
                                         (click)=onPageNumberClick(number+1)
                                         [class.page-number-active]="number + 1 == pageNumber"
                                         *ngIf="number + 1 <= maxPossiblePageNumber">
                                        {{number + 1}}
                                    </div>
                                </div>
                                <div class="page-number d-flex align-items-center justify-content-center"
                                     (click)=onNextPaginationClick()
                                     [class.disabled]="!enableNextPageClick">
                                    <i class="fa-solid fa-chevron-right"></i>
                                </div>
                            </div>
                        </div>
                        

                        <table class="table table-hover text-center">
                            <thead>
                                <tr class="align-middle">
                                    <th scope="col">
                                        <div class="d-inline">Product Id</div>
                                        <div class="d-inline ms-2 sorter-table" (click)="onSorterClick('sortProductId')" *ngIf="sorterMaps.get('sortProductId') == 0"><i class="fa-solid fa-sort"></i></div>
                                        <div class="d-inline ms-2 sorter-table" (click)="onSorterClick('sortProductId')" *ngIf="sorterMaps.get('sortProductId') == 1"> <i class="fa-solid fa-sort-up"></i></div>
                                        <div class="d-inline ms-2 sorter-table" (click)="onSorterClick('sortProductId')" *ngIf="sorterMaps.get('sortProductId') == -1"><i class="fa-solid fa-sort-down"></i></div>
                                    </th>
                                    <th scope="col">
                                        <div class="d-inline">Model</div>
                                        <div class="d-inline ms-2 sorter-table" (click)="onSorterClick('sortModel')" *ngIf="sorterMaps.get('sortModel') == 0"><i class="fa-solid fa-sort"></i></div>
                                        <div class="d-inline ms-2 sorter-table" (click)="onSorterClick('sortModel')" *ngIf="sorterMaps.get('sortModel') == 1"><i class="fa-solid fa-sort-up"></i></div>
                                        <div class="d-inline ms-2 sorter-table" (click)="onSorterClick('sortModel')" *ngIf="sorterMaps.get('sortModel') == -1"><i class="fa-solid fa-sort-down"></i></div>
                                    </th>
                                    <th scope="col">
                                        <div class="d-inline">Brand</div>
                                        <div class="d-inline ms-2 sorter-table" (click)="onSorterClick('sortBrand')" *ngIf="sorterMaps.get('sortBrand') == 0"><i class="fa-solid fa-sort"></i></div>
                                        <div class="d-inline ms-2 sorter-table" (click)="onSorterClick('sortBrand')" *ngIf="sorterMaps.get('sortBrand') == 1"><i class="fa-solid fa-sort-up"></i></div>
                                        <div class="d-inline ms-2 sorter-table" (click)="onSorterClick('sortBrand')" *ngIf="sorterMaps.get('sortBrand') == -1"><i class="fa-solid fa-sort-down"></i></div>
                                    </th>
                                    <th scope="col">
                                        <div class="d-inline">Color</div>
                                        <div class="d-inline ms-2 sorter-table" (click)="onSorterClick('sortColor')" *ngIf="sorterMaps.get('sortColor') == 0"><i class="fa-solid fa-sort"></i></div>
                                        <div class="d-inline ms-2 sorter-table" (click)="onSorterClick('sortColor')" *ngIf="sorterMaps.get('sortColor') == 1"><i class="fa-solid fa-sort-up"></i></div>
                                        <div class="d-inline ms-2 sorter-table" (click)="onSorterClick('sortColor')" *ngIf="sorterMaps.get('sortColor') == -1"><i class="fa-solid fa-sort-down"></i></div>
                                    </th>
                                    <th scope="col">
                                        <div class="d-inline">Price</div>
                                        <div class="d-inline ms-2 sorter-table" (click)="onSorterClick('sortPrice')" *ngIf="sorterMaps.get('sortPrice') == 0"><i class="fa-solid fa-sort"></i></div>
                                        <div class="d-inline ms-2 sorter-table" (click)="onSorterClick('sortPrice')" *ngIf="sorterMaps.get('sortPrice') == 1"><i class="fa-solid fa-sort-up"></i></div>
                                        <div class="d-inline ms-2 sorter-table" (click)="onSorterClick('sortPrice')" *ngIf="sorterMaps.get('sortPrice') == -1"><i class="fa-solid fa-sort-down"></i></div>
                                    </th>
                                    <th scope="col">
                                        <div class="d-inline">Discount (%)</div>
                                        <div class="d-inline ms-2 sorter-table" (click)="onSorterClick('sortDiscount')" *ngIf="sorterMaps.get('sortDiscount') == 0"><i class="fa-solid fa-sort"></i></div>
                                        <div class="d-inline ms-2 sorter-table" (click)="onSorterClick('sortDiscount')" *ngIf="sorterMaps.get('sortDiscount') == 1"><i class="fa-solid fa-sort-up"></i></div>
                                        <div class="d-inline ms-2 sorter-table" (click)="onSorterClick('sortDiscount')" *ngIf="sorterMaps.get('sortDiscount') == -1"><i class="fa-solid fa-sort-down"></i></div>
                                    </th>
                                    <th scope="col">
                                        <div class="d-inline">Discounted Price</div>
                                        <div class="d-inline ms-2 sorter-table" (click)="onSorterClick('sortDiscountedPrice')" *ngIf="sorterMaps.get('sortDiscountedPrice') == 0"><i class="fa-solid fa-sort"></i></div>
                                        <div class="d-inline ms-2 sorter-table" (click)="onSorterClick('sortDiscountedPrice')" *ngIf="sorterMaps.get('sortDiscountedPrice') == 1"><i class="fa-solid fa-sort-up"></i></div>
                                        <div class="d-inline ms-2 sorter-table" (click)="onSorterClick('sortDiscountedPrice')" *ngIf="sorterMaps.get('sortDiscountedPrice') == -1"><i class="fa-solid fa-sort-down"></i></div>
                                    </th>
                                    <th scope="col">
                                        <div class="d-inline">Available Stocks</div>
                                        <div class="d-inline ms-2 sorter-table" (click)="onSorterClick('sortAvailableStocks')" *ngIf="sorterMaps.get('sortAvailableStocks') == 0"><i class="fa-solid fa-sort"></i></div>
                                        <div class="d-inline ms-2 sorter-table" (click)="onSorterClick('sortAvailableStocks')" *ngIf="sorterMaps.get('sortAvailableStocks') == 1"><i class="fa-solid fa-sort-up"></i></div>
                                        <div class="d-inline ms-2 sorter-table" (click)="onSorterClick('sortAvailableStocks')" *ngIf="sorterMaps.get('sortAvailableStocks') == -1"><i class="fa-solid fa-sort-down"></i></div>
                                    </th>
                                    <th scope="col">
                                        <div class="d-inline">Items Sold</div>
                                        <div class="d-inline ms-2 sorter-table" (click)="onSorterClick('sortItemsSold')" *ngIf="sorterMaps.get('sortItemsSold') == 0"><i class="fa-solid fa-sort"></i></div>
                                        <div class="d-inline ms-2 sorter-table" (click)="onSorterClick('sortItemsSold')" *ngIf="sorterMaps.get('sortItemsSold') == 1"><i class="fa-solid fa-sort-up"></i></div>
                                        <div class="d-inline ms-2 sorter-table" (click)="onSorterClick('sortItemsSold')" *ngIf="sorterMaps.get('sortItemsSold') == -1"><i class="fa-solid fa-sort-down"></i></div>
                                    </th>
                                </tr>
                            </thead>
                            <tbody #productRows>
                                <tr *ngFor="let product of productList; index as i" class="order-row align-middle" (click)="onProductClick(product, productDetails)">
                                    <td>{{product.id}}</td>
                                    <td>{{product.model}}</td>
                                    <td>{{product.brand}}</td>
                                    <td>{{product.color}}</td>
                                    <td>
                                        {{product.price.toLocaleString("en-US", {
                                        style: "currency",
                                        currency: "Php"
                                        })}}
                                    </td>
                                    <td>{{product.discount}}</td>
                                    <td>
                                        {{product.discountedPrice.toLocaleString("en-US", {
                                        style: "currency",
                                        currency: "Php"
                                        })}}
                                    </td>
                                    <td>{{product.availableStocks}}</td>
                                    <td>{{product.soldItems}}</td>

                                </tr>

                            </tbody>
                        </table>
                    </div>
                </div>

            </div>
        </div>





    </div>
</div>

<ng-template #productDetails let-modal>
    <div class="modal-header">
        <div class="fw-bold fs-5 d-flex align-items-center">
            <i class="fa-solid fa-mobile-screen-button me-2" style="color: #183153; font-size: 17px"></i>
            Product Information
        </div>
        <button type="button" class="btn-close " aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    </div>



    <div class="modal-body">
        <div class="align-middle">
            <div class="row data-row my-0">
                <div class="col">
                    <div class="row data-row">
                        <div class="col-4 h-auto d-flex align-items-center">
                            <label for="productId">Product Id</label>
                        </div>
                        <div class="col-8">
                            <input type="text" class="form-control disabled" id="productId" value="{{selectedProduct.id}}">
                        </div>
                    </div>
                    <div class="row data-row">

                        <div class="col-4 h-auto d-flex align-items-center">
                            <label for="model">Model</label>
                        </div>
                        <div class="col-8 position-relative">
                            <input type="text" class="form-control " id="model" [(ngModel)]="formModel">
                            <label class="warning-message" *ngIf="formModel != selectedProduct.model"> <i class="fa-solid fa-pen-to-square"></i></label>
                        </div>

                    </div>

                    <div class="row data-row">
                        <div class="col-4 h-auto d-flex align-items-center">
                            <label for="productId">Brand</label>
                        </div>
                        <div class="col-8 position-relative">
                            <input type="text" class="form-control" id="brand" [(ngModel)]="formBrand">
                            <label class="warning-message" *ngIf="formBrand != selectedProduct.brand"> <i class="fa-solid fa-pen-to-square"></i></label>
                        </div>
                    </div>

                    <div class="row data-row">
                        <div class="col-4 h-auto d-flex align-items-center">
                            <label for="deviceOS">Device OS</label>
                        </div>
                        <div class="col-8 position-relative">
                            <input type="text" class="form-control" id="deviceOS" [(ngModel)]="formDeviceOS">
                            <label class="warning-message" *ngIf="formDeviceOS != selectedProduct.deviceOS"> <i class="fa-solid fa-pen-to-square"></i></label>
                        </div>
                    </div>

                    <div class="row data-row">
                        <div class="col-4 h-auto d-flex align-items-center">
                            <label for="color">Color</label>
                        </div>
                        <div class="col-8 position-relative">
                            <input type="text" class="form-control" id="color" [(ngModel)]="formColor">
                            <label class="warning-message" *ngIf="formColor != selectedProduct.color"> <i class="fa-solid fa-pen-to-square"></i></label>
                        </div>
                    </div>
                </div>
                <div class="col d-flex align-items-center justify-content-center">
                    <img src="{{selectedProduct.image}}" class="img-fluid" />
                </div>
            </div>
            

            <div class="row data-row">
                <div class="col-2 h-auto d-flex align-items-center">
                    <label for="description">Description</label>
                </div>
                <div class="col-10 position-relative">
                    <input type="text" class="form-control" id="description" [(ngModel)]="formDescription">
                    <label class="warning-message" *ngIf="formDescription != selectedProduct.description"> <i class="fa-solid fa-pen-to-square"></i></label>
                </div>
            </div>

            <div class="row data-row">
                <div class="col-2 h-auto d-flex align-items-center">
                    <label for="productId">Image URL</label>
                </div>
                <div class="col-10 position-relative">
                    <input type="text" class="form-control" id="imageURL" [(ngModel)]="formImageURL">
                    <label class="warning-message" *ngIf="formImageURL != selectedProduct.image"> <i class="fa-solid fa-pen-to-square"></i></label>
                </div>
            </div>



            <div class="row data-row">
                <div class="col-2 h-auto d-flex align-items-center">
                    <label for="price">Price</label>
                </div>
                <div class="col-10 position-relative">
                    <input type="number" class="form-control" id="price" [(ngModel)]="formPrice">
                    <label class="warning-message" *ngIf="formPrice != selectedProduct.price"> <i class="fa-solid fa-pen-to-square"></i></label>
                </div>
            </div>

            <div class="row data-row">
                <div class="col-2 h-auto d-flex align-items-center">
                    <label for="discount">Discount (%)</label>
                </div>
                <div class="col-10 position-relative">
                    <input type="number" class="form-control" id="discount" [(ngModel)]="formDiscount">
                    <label class="warning-message" *ngIf="formDiscount != selectedProduct.discount"> <i class="fa-solid fa-pen-to-square"></i></label>
                </div>
            </div>

            <div class="row data-row">
                <div class="col-2 h-auto d-flex align-items-center">
                    <label for="availableStocks">Available stocks</label>
                </div>
                <div class="col-10 position-relative">
                    <input type="number" class="form-control" id="availableStocks" [(ngModel)]="formAvailableStocks">
                    <label class="warning-message" *ngIf="formAvailableStocks != selectedProduct.availableStocks"> <i class="fa-solid fa-pen-to-square"></i></label>
                </div>
            </div>

            <div class="row data-row">
                <div class="col-2 h-auto d-flex align-items-center">
                    <label for="itemsSold">Items sold</label>
                </div>
                <div class="col-10 position-relative">
                    <input type="number" class="form-control disabled" id="itemsSold" [(ngModel)]="formItemsSold">
                    <label class="warning-message" *ngIf="formItemsSold != selectedProduct.soldItems"> <i class="fa-solid fa-pen-to-square"></i></label>
                </div>
            </div>

            <div class="row data-row">
                <div class="col-2 h-auto d-flex align-items-center">
                    <label for="releaseDate">Release Date</label>
                </div>
                <div class="col-10 position-relative">
                    <input type="number" class="form-control" id="releaseDate" [(ngModel)]="formReleaseDate">
                    <label class="warning-message" *ngIf="formReleaseDate != selectedProduct.releaseDate"> <i class="fa-solid fa-pen-to-square"></i></label>
                </div>
            </div>

            <div class="row data-row">
                <div class="col-2 h-auto d-flex align-items-center">
                    <label for="rating">Rating</label>
                </div>
                <div class="col-10 position-relative">
                    <input type="number" class="form-control" id="rating" [(ngModel)]="formRating">
                    <label class="warning-message" *ngIf="formRating != selectedProduct.rating"> <i class="fa-solid fa-pen-to-square"></i></label>
                </div>
            </div>

            <div class="row data-row">
                <div class="col-2 h-auto d-flex align-items-center">
                    <label for="seller">Seller</label>
                </div>
                <div class="col-10 position-relative">
                    <input type="text" class="form-control" id="seller" [(ngModel)]="formSeller">
                    <label class="warning-message" *ngIf="formSeller != selectedProduct.seller"> <i class="fa-solid fa-pen-to-square"></i></label>
                </div>
            </div>

            <div class="row data-row">
                <div class="col-2 h-auto d-flex align-items-center">
                    <label for="productId">Previous Owner</label>
                </div>
                <div class="col-10 position-relative">
                    <input type="text" class="form-control" id="prevOwnerFirstName" [(ngModel)]="formPrevOwner">
                    <label class="warning-message" *ngIf="formPrevOwner != selectedProduct.previousOwner"> <i class="fa-solid fa-pen-to-square"></i></label>
                </div>
            </div>
        </div>
    </div>

    <div class="modal-footer">
        <button type="button" class="btn btn-primary fs-6" [class.disabled]="disableUpdateBtn()" (click)="onUpdateProductClick()">Update Product</button>
        <button type="button" class="btn btn-secondary fs-6"  (click)="modal.close('Close click')">Close</button>
    </div>
</ng-template>
